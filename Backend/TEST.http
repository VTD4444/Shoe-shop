@baseUrl = http://localhost:5000
@token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMTM4ODc5MWEtOGUzZC00OWMyLTlmMTktNjQ1NTU3MjkxZmFhIiwicm9sZSI6ImN1c3RvbWVyIiwiaWF0IjoxNzY1NzIyMjMyfQ.C3OzdO7BtN9QEL67yEnFwKc5YmAXp0oKrgl_RMlrOeA
### ==========================================
### 1. TEST ĐĂNG KÝ (REGISTER)
### ==========================================
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "full_name": "admin",
  "email": "admin@gmail.com",
  "password": "password123",
  "phone_number": "0987654321"
}

### ==========================================
### 2. TEST ĐĂNG NHẬP (LOGIN)
### ==========================================
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "hieutest12@gmail.com",
  "password": "password123"
}

### ==========================================
### 3. TEST LỖI VALIDATION (Thử nhập thiếu SĐT)
### ==========================================
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "full_name": "User Loi",
  "email": "loi@gmail.com",
  "password": "123"
}

### ==========================================

GET {{baseUrl}}/users/profile
Authorization: Bearer {{token}}

### ==========================================
### 4. CẬP NHẬT HỒ SƠ (UPDATE PROFILE)
### ==========================================
PUT {{baseUrl}}/users/profile
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "full_name": "Nguyen Van A (Da Sua)",
  "gender": "male",
  "birth_date": "2000-10-20",
  "phone_number": "0999888777"
}

### ==========================================
### 6. ĐỔI MẬT KHẨU (CHANGE PASSWORD)
### ==========================================
PUT {{baseUrl}}/users/change-password
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "current_password": "password123",
  "new_password": "newpassword456",
  "confirm_password": "newpassword456"
}

### ==========================================
### 8. LẤY DANH SÁCH ĐỊA CHỈ (GET)
### ==========================================
GET {{baseUrl}}/addresses
Authorization: Bearer {{token}}


### ==========================================
### 10. THÊM ĐỊA CHỈ MỚI (POST)
### ==========================================
POST {{baseUrl}}/addresses
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "recipient_name": "Nguyen Van A",
  "phone": "0912345678",
  "street": "So 10 Ngo 12",
  "ward": "Lang Thuong",
  "district": "Dong Da",
  "city": "Ha Noi",
  "is_default": false
}

### Thêm một địa chỉ nữa (để test danh sách)
POST {{baseUrl}}/addresses
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "recipient_name": "Tran Van C",
  "phone": "0987654321",
  "street": "So 123 Duong Lang",
  "ward": "Lang Ha",
  "district": "Dong Da",
  "city": "Ha Noi",
  "is_default": true
}


### ==========================================
### 11. SỬA ĐỊA CHỈ (PUT)
### ==========================================
# ⚠️ HƯỚNG DẪN:
# 1. Chạy API "Lấy danh sách" ở trên.
# 2. Copy một cái "address_id" bất kỳ (ví dụ: "a1b2c3d4...").
# 3. Thay thế vào chỗ <ID_DIA_CHI> ở link bên dưới.
@addressId =01c18044-f948-4e52-86af-183ecb8cd54a
PUT {{baseUrl}}/addresses/{{addressId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "recipient_name": "Nguyen A (Da Sua)",
  "phone": "0999888777",
  "street": "So 1330s Ngo 12 (Sua)",
  "ward": "Lang Thuong",
  "district": "Dong Da",
  "city": "Ha Noi",
  "is_default": true
}


### ==========================================
### 12. XÓA ĐỊA CHỈ (DELETE)
### ==========================================
# ⚠️ HƯỚNG DẪN: Thay ID cần xóa vào chỗ <ID_DIA_CHI>

DELETE {{baseUrl}}/addresses/{{addressId}}
Authorization: Bearer {{token}}

### ==========================================
### 13. TÌM KIẾM SẢN PHẨM (SEARCH)
### ==========================================

# Test 1: Lấy tất cả (sẽ ra 2 sản phẩm)
POST {{baseUrl}}/products/search
Content-Type: application/json

{
  "page": 1,
  "limit": 10
}

### Test 2: Tìm theo tên "Nike" (sẽ ra 1 sản phẩm)
POST {{baseUrl}}/products/search
Content-Type: application/json

{
}

### Test 3: Lọc theo giá (từ 4 triệu trở lên -> ra Adidas)
POST {{baseUrl}}/products/search
Content-Type: application/json

{
  "min_price": 4000000
}

### ==========================================
### 14. LẤY DỮ LIỆU BỘ LỌC (FULL OPTIONS)
### ==========================================
GET {{baseUrl}}/products/filters


### ==========================================
### 15. LẤY TOP BÁN CHẠY (TRENDING)
### ==========================================
GET {{baseUrl}}/products/trending?limit=5

### ==========================================
### 16. LẤY CHI TIẾT SẢN PHẨM (DETAIL)
### ==========================================

# Bước 1: Gọi search để lấy ID trước (nếu quên)
POST {{baseUrl}}/products/search
Content-Type: application/json

{
}
###

# Bước 2: Thay ID sản phẩm vào chỗ <ID_SAN_PHAM>
GET {{baseUrl}}/products/c2dd3344-ee55-66ff-8899-aabbccddee02

### ==========================================
### 17. THÊM VÀO GIỎ HÀNG
### ==========================================
POST {{baseUrl}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "variant_id": "d4ee5566-ff77-8899-00aa-bbccddeeff01",
  "quantity": 2
}

### ==========================================
### 18. XEM GIỎ HÀNG (GET CART)
### ==========================================
GET {{baseUrl}}/cart
Authorization: Bearer {{token}}



### ==========================================
### 19. CẬP NHẬT SỐ LƯỢNG (PUT /cart/:id)
### ==========================================
# Thay <CART_ITEM_ID> bằng ID thực tế lấy từ API Get Cart
PUT {{baseUrl}}/cart/d7d3e6f0-9bd0-479b-9655-3c1f729237c6
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quantity": 5
}

### ==========================================
### 20. XÓA KHỎI GIỎ (DELETE /cart/:id)
### ==========================================
DELETE {{baseUrl}}/cart/32549153-0bfa-4e7f-8131-ba2341288909
Authorization: Bearer {{token}}

### ==========================================
### 21. TÍNH TOÁN ĐƠN HÀNG (PREVIEW)
### ==========================================
# Cần thay address_id bằng ID thật của bạn trong bảng addresses
# Nếu chưa có voucher thì xóa dòng voucher_code đi

POST {{baseUrl}}/orders/preview
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "address_id": "87a822e7-4612-4912-8a44-021610aa2765",
  "voucher_code": "HELLO2025",
  "shipping_method": "express"
}

### ==========================================
### 22. TẠO ĐƠN HÀNG (PLACE ORDER)
### ==========================================
# Trường hợp 1: Thanh toán COD
POST {{baseUrl}}/orders
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "address_id": "87a822e7-4612-4912-8a44-021610aa2765",
  "payment_method": "COD",
  "shipping_method": "express",
  "voucher_code": "HELLO2025",
  "note": "Giao hang buoi chieu nhe"
}

### ==========================================
### TEST ONLINE PAYMENT
### ==========================================
# Trường hợp 2: Thanh toán MOMO (Sẽ trả về link)
POST {{baseUrl}}/orders
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "address_id": "87a822e7-4612-4912-8a44-021610aa2765",
  "payment_method": "MOMO",
    "voucher_code": "HELLO2025",
  "shipping_method": "express"
}

### ==========================================
### 23. CẬP NHẬT TRẠNG THÁI "ĐÃ THANH TOÁN"
### ==========================================
# Thay <ORDER_ID> bằng ID đơn hàng bạn vừa tạo
PUT {{baseUrl}}/orders/b10f106f-ea66-405a-b752-6153c5be46c2/pay
Authorization: Bearer {{token}}


### ==========================================
### 24. LỊCH SỬ ĐƠN HÀNG (HISTORY)
### ==========================================

### Test 1: Lấy tất cả (Mặc định)
GET {{baseUrl}}/orders
Authorization: Bearer {{token}}

### Test 2: Lọc đơn "Chờ xử lý" (pending)
GET {{baseUrl}}/orders?status=pending
Authorization: Bearer {{token}}

### Test 3: Lọc đơn "Chưa thanh toán" (unpaid)
GET {{baseUrl}}/orders?payment_status=unpaid
Authorization: Bearer {{token}}

### Test 4: Combo lọc (Đã hoàn thành + Đã trả tiền)
GET {{baseUrl}}/orders?status=completed&payment_status=paid
Authorization: Bearer {{token}}



### ==========================================
### 25. CHI TIẾT ĐƠN HÀNG (DETAIL)
### ==========================================
# Thay <ORDER_ID> bằng UUID thực tế
GET {{baseUrl}}/orders/b10f106f-ea66-405a-b752-6153c5be46c2
Authorization: Bearer {{token}}

### ==========================================
### 26. HỦY ĐƠN HÀNG
### ==========================================
PUT {{baseUrl}}/orders/b10f106f-ea66-405a-b752-6153c5be46c2/cancel
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "reason": "Tôi muốn đổi sang màu khác"
}


### ==========================================
### 27. GỬI ĐÁNH GIÁ (SUBMIT REVIEW)
### ==========================================

### Case 1: Thành công (Đã mua + Đã nhận hàng)
# Thay <PRODUCT_ID> và <ORDER_ID_COMPLETED>
POST {{baseUrl}}/products/c2dd3344-ee55-66ff-8899-aabbccddee01/reviews
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "order_id": "b10f106f-ea66-405a-b752-6153c5be46c2",
  "rating": 5,
  "content": "Sản phẩm dùng rất tốt, tôi rất hài lòng."
}

### Case 2: Lỗi chưa mua (Hoặc đơn chưa completed)
# Thay bằng một order_id đang pending hoặc order_id tào lao
POST {{baseUrl}}/products/b10f106f-ea66-405a-b752-6153c5be46c2/reviews
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "order_id": "b10f106f-ea66-405a-b752-6153c5be46c2",
  "rating": 5,
  "content": "Chưa nhận hàng mà đòi đánh giá."
}

### Case 3: Lỗi nội dung ngắn
POST {{baseUrl}}/products/c2dd3344-ee55-66ff-8899-aabbccddee01/reviews
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "order_id": "b10f106f-ea66-405a-b752-6153c5be46c2",
  "rating": 4,
  "content": "Ngan qua 123123"
}
### Case 4: Nội dung Độc hại (Sẽ bị chặn 400)
# Thử nhập các từ ngữ tiêu cực mà model AI của bạn đã học
POST {{baseUrl}}/products/c2dd3344-ee55-66ff-8899-aabbccddee01/reviews
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "order_id": "b10f106f-ea66-405a-b752-6153c5be46c2",
  "rating": 1,
  "content": "treo đầu dê bán thịt chó à mày"
}

### ==========================================
### 28. LẤY DANH SÁCH REVIEW (GET /products/:id/reviews)
### ==========================================

### Test 1: Lấy mặc định (Trang 1, Mới nhất)
# Thay <PRODUCT_ID> bằng ID sản phẩm đã có review
GET {{baseUrl}}/products/c2dd3344-ee55-66ff-8899-aabbccddee01/reviews

### Test 2: Lọc chỉ xem 5 sao
GET {{baseUrl}}/products/c2dd3344-ee55-66ff-8899-aabbccddee01/reviews?star=4

### Test 3: Sắp xếp điểm cao nhất
GET {{baseUrl}}/products/c2dd3344-ee55-66ff-8899-aabbccddee01/reviews?sort=highest



### ==========================================
### NHÓM 5: ADMIN DASHBOARD & QUẢN TRỊ
### (Yêu cầu Token Admin)
### ==========================================

### ------------------------------------------
### A. PHÂN HỆ DASHBOARD (Thống kê)
### ------------------------------------------

@adminToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNTdlNWJhMDQtZTJjYi00ODQ1LWFkNzItN2M4OGFjZjU0MzI5Iiwicm9sZSI6ImFkbWluIiwiaWF0IjoxNzY2MTM3NjI0fQ.zGq7b3DVNx_0k82qaJXxTQJ1TAE8x_2yg9Fc88yB48M
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@gmail.com",
  "password": "password123"
}
### 29. Lấy thống kê tổng quan (4 ô trên cùng)
# Trả về: Doanh thu, Tổng đơn, Đơn chờ, Hàng sắp hết
GET {{baseUrl}}/dashboard/stats
Authorization: Bearer {{adminToken}}

### 30. Lấy Top 5 biến thể bán chạy
# Trả về danh sách để vẽ biểu đồ
GET {{baseUrl}}/dashboard/top-products?time_range=month
Authorization: Bearer {{adminToken}}

### ------------------------------------------
### B. PHÂN HỆ KHO HÀNG (INVENTORY)
### ------------------------------------------

### 31. Lấy bảng kho hàng (Dùng Body)
POST {{baseUrl}}/products/inventory
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "page": 1,
  "limit": 5,
  "search": "NIKE",
  "sort": "stock_asc"
}

### ------------------------------------------
### C. PHÂN HỆ SẢN PHẨM (MASTER UPDATE)
### ------------------------------------------

### 33. Cập nhật Sản phẩm & Nhập kho (All-in-One)
# API quan trọng: Sửa info, File AR và Nhập số lượng cho từng size
PUT {{baseUrl}}/products/c2dd3344-ee55-66ff-8899-aabbccddee01
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "Nike Air Jordan 1 (Updated 2025)",
  "base_price": 5500000,
  "variants_update": [
    {
      "variant_id": "d4ee5566-ff77-8899-00aa-bbccddeeff02",
      "stock_quantity": 50,
      "price_modifier": 0
    }
  ]
}

### ------------------------------------------
### D. PHÂN HỆ ĐƠN HÀNG (ORDER MANAGEMENT)
### ------------------------------------------

### 34. Lấy danh sách toàn bộ đơn hàng (Admin View)
# Lấy đơn mới nhất, trạng thái 'pending'
GET {{baseUrl}}/orders?page=1&limit=10&status=pending
Authorization: Bearer {{adminToken}}

### 35. Duyệt đơn hàng / Cập nhật trạng thái
# Chuyển từ 'pending' -> 'shipping'
PATCH {{baseUrl}}/orders/<THAY_ORDER_ID_VAO_DAY>/status
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "status": "shipped",
  "note": "Đã giao cho Shipper GHTK, mã vận đơn: #VN123456"
}